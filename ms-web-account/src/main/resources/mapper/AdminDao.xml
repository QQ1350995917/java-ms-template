<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="pwd.initializr.account.persistence.dao.AdminDao">

  <resultMap id="adminMap" type="pwd.initializr.account.persistence.entity.AdminEntity">
    <result column="id" jdbcType="INTEGER" property="id"/>
    <result column="login_name" jdbcType="VARCHAR" property="loginName"/>
    <result column="login_password" jdbcType="VARCHAR" property="loginPassword"/>
    <result column="name" jdbcType="VARCHAR" property="name"/>
    <result column="gender" jdbcType="INTEGER" property="gender"/>
    <result column="summary" jdbcType="VARCHAR" property="summary"/>
    <result column="level" jdbcType="INTEGER" property="level"/>
    <result column="able_status" jdbcType="INTEGER" property="ableStatus"/>
    <result column="del_status" jdbcType="INTEGER" property="delStatus"/>
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime"/>
    <result column="update_time" jdbcType="TIMESTAMP" property="updateTime"/>
  </resultMap>

  <!--查询单个-->
  <select id="queryById" resultMap="adminMap">
        select
        id,
        login_name,
        login_password,
        name,
        gender,
        summary,
        level,
        able_status,
        del_status,
        create_time,
        update_time
        from initializr_account.admin
        where id = #{id}
    </select>

  <!--查询指定行数据-->
  <select id="queryAllByLimit" resultMap="adminMap">
        select
          id, login_name, login_password, name, gender, summary, level, able_status,del_status, create_time, update_time
        from initializr_account.admin
        limit #{offset}, #{limit}
    </select>


  <sql id="listAndCountByCondition">
    <if test="adminEntity.loginName != null and adminEntity.loginName != ''">
      and adminEntity.login_name like CONCAT('%', #{adminEntity.loginName},'%')
    </if>
    <if test="adminEntity.name != null and adminEntity.name != ''">
      and adminEntity.name like CONCAT('%', #{adminEntity.name},'%')
    </if>
    <if test="adminEntity.gender != null">
      and adminEntity.gender = #{adminEntity.gender}
    </if>
    <if test="adminEntity.summary != null and adminEntity.summary != ''">
      and adminEntity.summary like CONCAT('%',#{adminEntity.summary},'%')
    </if>
    <if test="adminEntity.level != null">
      and adminEntity.level = #{adminEntity.level}
    </if>
    <if test="adminEntity.ableStatus != null">
      and adminEntity.able_status = #{adminEntity.ableStatus}
    </if>
    <if test="adminEntity.delStatus != null">
      and adminEntity.del_status = #{adminEntity.delStatus}
    </if>
    <if test="adminEntity.createTime != null">
      and adminEntity.create_time = #{adminEntity.createTime}
    </if>
    <if test="adminEntity.updateTime != null">
      and adminEntity.update_time = #{adminEntity.updateTime}
    </if>
  </sql>

  <!--通过实体作为筛选条件查询-->
  <select id="queryByCondition" resultMap="adminMap">
    select
    id, login_name, login_password, name, gender, summary, level, able_status,del_status,
    create_time, update_time
    from initializr_account.admin
    <where>
      <include refid="listAndCountByCondition"/>
    </where>
    <if test="orderBys != null">
      order by
      <foreach collection="orderBys" index="index" item="item" open="" separator="," close="">
        ${item}
      </foreach>
    </if>
    limit #{offset},#{pageSize}
  </select>

  <!--通过实体作为筛选条件查询-->
  <select id="countAll" resultType="java.lang.Integer">
    select count(*)
    from initializr_account.admin
    <where>
      <include refid="listAndCountByCondition"/>
    </where>
  </select>


  <!--新增所有列-->
  <insert id="insert" keyColumn="id" keyProperty="id" parameterType="pwd.initializr.account.persistence.entity.AdminEntity"
    useGeneratedKeys="true">
        insert into
        initializr_account.admin
        (login_name, login_password, name, gender, summary, level, able_status, del_status, create_time, update_time)
        values
        (#{loginName}, #{loginPassword}, #{name}, #{gender}, #{summary}, #{level}, #{ableStatus},#{delStatus}, #{createTime}, #{updateTime})
    </insert>

  <!--通过主键修改数据-->
  <update id="update">
    update initializr_account.admin
    <set>
      <if test="loginName != null and loginName != ''">
        login_name = #{loginName},
      </if>
      <if test="loginPassword != null and loginPassword != ''">
        login_password = #{loginPassword},
      </if>
      <if test="name != null and name != ''">
        name = #{name},
      </if>
      <if test="gender != null and gender != ''">
        gender = #{gender},
      </if>
      <if test="summary != null and summary != ''">
        summary = #{summary},
      </if>
      <if test="level != null and level != ''">
        level = #{level},
      </if>
      <if test="able_status != null">
        and able_status = #{ableStatus}
      </if>
      <if test="del_status != null">
        and del_status = #{delStatus}
      </if>
      <if test="createTime != null">
        create_time = #{createTime},
      </if>
      <if test="updateTime != null">
        update_time = #{updateTime},
      </if>
    </set>
    where id = #{id}
  </update>

  <!--通过主键删除-->
  <delete id="deleteById">
    delete from initializr_account.admin where id = #{id}
  </delete>

</mapper>
